<html>
  <head>
    <title>JAVASCRIPT HW3</title>
  </head>

  <body>
    <script>
      // ЗАДАНИЯ ДЛЯ РАЗМИНКИ!!!!!!)))

      //1) Есть участок кода! обернуть в try catch нужный участок кода и выбросить ошибку если getResult возвращает undefined
      function getResult() {
        var obj = {
          name: 'Sergei',
          lastName: 'Shakhov',
        };
        return;
        obj;
      }

      try {
        const a = getResult();
        if (a === undefined) throw new Error('Бросаю ошибку :)');
        console.log('RESULT', a);
      } catch (e) {}

      //2) исправить код чтобы консоль логи показывали от 0 до 10, и написать почему сейчас выводит десять десяток!!
      for (let i = 0; i < 10; i++) {
        setTimeout(() => console.log(i), 0);
      }

      // var вне замыкания контекста цикла, все колбеки выполнятся после того как синхронный код выполнится, а значит что на момент
      // раскручивания очереди колбеков каждый из них будет ссылаться в памяти на последнее актуальное значение i которое уже будет = 10

      // 3) Есть код!! В какой последовательности выполнится!
      function getDatas() {
        return [
          {
            name: 'Vasia',
          },
          {
            name: 'Boria',
          },
          {
            name: 'Misha',
          },
        ];
      }

      const res = getDatas(); // 1

      console.log('RES', res); // 2

      setTimeout(() => console.log('settimeout1'), 100); // 6
      setTimeout(() => console.log('settimeout'), 10); // 5

      console.log('One'); // 3
      console.log('two'); // 4

      //4) Что выведет alert в setTimeOut

      setTimeout(function () {
        alert(i);
      }, 100);

      for (var i = 0; i < 1000000; i++) {}

      // Будет выведено 1000000

      // 5) Есть функция funct! Сделать из нее функцию конструктор которая создает обьект со свойствами name lastName
      function funct(name, lastName) {
        this.name = name;
        this.lastName = lastName;
      }

      const functInstance = new funct('name', 'last name');

      // 6) Создать функцию конструктор, которая принимает обьект и берет только lastName и position и создает обьект с этих свойств
      function factory({ lastName, position }) {
        this.lastName = lastName;
        this.position = position;
      }

      new factory({ name: 'Sergei', lastName: 'Shakhov', height: 188, position: 'Software developer' });

      // 7) Сделайте так чтобы выболнялось settimeout1 RES RES1
      console.log('settimeout1');
      console.log('RES', res);
      console.log('RES1', res);

      // 8) Есть код! Почему строчка с комментарием покажет {misha: NADUSHA}! Сделать так чтобы a.getObject(); вернул {misha: 'misha'}
      // то есть должны быть независимые обьекты!!
      function newFactory(obj) {
        var object = obj;

        return {
          getObject: function () {
            return { ...object };
          },
        };
      }
      var a = newFactory({ misha: 'misha' });
      var k = a.getObject();
      k.misha = 'NADUSHA';
      a.getObject(); // КОММЕНТАРИЙ!!! покажет NADUSHA

      // Потому что мы получили ссылку в памяти на один и тот же объект
    </script>
  </body>
</html>
